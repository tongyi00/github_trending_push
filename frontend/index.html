<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Trending Push - Dashboard</title>
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background: #f5f7fa; }
        #app { display: flex; height: 100vh; }
        .sidebar { width: 200px; background: #304156; color: white; display: flex; flex-direction: column; }
        .sidebar-header { padding: 20px; font-size: 18px; font-weight: bold; border-bottom: 1px solid #3a4a5c; text-align: center; }
        .sidebar-menu { flex: 1; }
        .menu-item { padding: 15px 20px; cursor: pointer; transition: background 0.3s; border-left: 3px solid transparent; }
        .menu-item:hover { background: #3a4a5c; }
        .menu-item.active { background: #409eff; border-left-color: #66b1ff; }
        .menu-item i { margin-right: 10px; }
        .main-content { flex: 1; overflow-y: auto; }
        .content-header { background: white; padding: 20px 30px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .content-header h1 { font-size: 24px; color: #303133; }
        .content-body { padding: 20px 30px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .stat-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 12px rgba(0,0,0,0.1); display: flex; align-items: center; }
        .stat-icon { width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; margin-right: 15px; }
        .stat-content { flex: 1; }
        .stat-label { color: #909399; font-size: 14px; margin-bottom: 5px; }
        .stat-value { font-size: 28px; font-weight: bold; color: #303133; }
        .chart-container { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 12px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .chart-title { font-size: 18px; font-weight: bold; color: #303133; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0; }
    </style>
</head>
<body>
    <div id="app">
        <div class="sidebar">
            <div class="sidebar-header">ğŸš€ Trending Push</div>
            <div class="sidebar-menu">
                <div class="menu-item" :class="{active: currentView === 'overview'}" @click="currentView = 'overview'">
                    <i>ğŸ“Š</i> æ€»è§ˆ
                </div>
                <div class="menu-item" :class="{active: currentView === 'projects'}" @click="currentView = 'projects'">
                    <i>ğŸ“¦</i> é¡¹ç›®åˆ—è¡¨
                </div>
                <div class="menu-item" :class="{active: currentView === 'trends'}" @click="currentView = 'trends'">
                    <i>ğŸ“ˆ</i> è¶‹åŠ¿åˆ†æ
                </div>
                <div class="menu-item" :class="{active: currentView === 'settings'}" @click="currentView = 'settings'">
                    <i>âš™ï¸</i> è®¾ç½®
                </div>
            </div>
        </div>

        <div class="main-content">
            <div v-if="currentView === 'overview'">
                <div class="content-header"><h1>ğŸ“Š æ•°æ®æ€»è§ˆ</h1></div>
                <div class="content-body">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">ğŸ“¦</div>
                            <div class="stat-content">
                                <div class="stat-label">æ€»é¡¹ç›®æ•°</div>
                                <div class="stat-value">{{ stats.total_repos || 0 }}</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">â­</div>
                            <div class="stat-content">
                                <div class="stat-label">æ€» Stars</div>
                                <div class="stat-value">{{ formatNumber(stats.total_stars) }}</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white;">ğŸ”¥</div>
                            <div class="stat-content">
                                <div class="stat-label">å¢é•¿æ•°</div>
                                <div class="stat-value">{{ formatNumber(stats.total_growth) }}</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <div class="chart-title">è¯­è¨€åˆ†å¸ƒ</div>
                        <div id="languageChart" style="width: 100%; height: 400px;"></div>
                    </div>
                </div>
            </div>

            <div v-if="currentView === 'projects'">
                <div class="content-header"><h1>ğŸ“¦ é¡¹ç›®åˆ—è¡¨</h1></div>
                <div class="content-body">
                    <el-table :data="projects" stripe style="width: 100%;">
                        <el-table-column prop="name" label="é¡¹ç›®" width="300"></el-table-column>
                        <el-table-column prop="language" label="è¯­è¨€" width="120"></el-table-column>
                        <el-table-column prop="stars" label="Stars" width="120"></el-table-column>
                        <el-table-column prop="description" label="æè¿°"></el-table-column>
                    </el-table>
                </div>
            </div>

            <div v-if="currentView === 'trends'">
                <div class="content-header"><h1>ğŸ“ˆ è¶‹åŠ¿åˆ†æ</h1></div>
                <div class="content-body">
                    <el-alert title="åŠŸèƒ½å¼€å‘ä¸­" type="info" :closable="false"></el-alert>
                </div>
            </div>

            <div v-if="currentView === 'settings'">
                <div class="content-header"><h1>âš™ï¸ è®¾ç½®ä¸­å¿ƒ</h1></div>
                <div class="content-body">
                    <el-alert title="åŠŸèƒ½å¼€å‘ä¸­" type="info" :closable="false"></el-alert>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/element-plus"></script>
    <script src="https://unpkg.com/echarts@5/dist/echarts.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script>
        const { createApp } = Vue;
        createApp({
            data() {
                return {
                    currentView: 'overview',
                    stats: { total_repos: 0, total_stars: 0, total_growth: 0 },
                    projects: []
                };
            },
            mounted() {
                this.loadData();
            },
            methods: {
                async loadData() {
                    try {
                        const res = await axios.get('http://localhost:8000/api/stats/overview');
                        this.stats = res.data;
                    } catch (e) {
                        console.error('APIæœªå¯åŠ¨:', e);
                    }
                },
                formatNumber(num) {
                    return num ? num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',') : '0';
                }
            }
        }).use(ElementPlus).mount('#app');
    </script>
</body>
</html>
